# Server Configuration
server.port=${SERVER_PORT:8086}

# OpenAPI Configuration (Scalar UI)
springdoc.api-docs.path=/api-docs
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=false

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=200MB
spring.servlet.multipart.max-request-size=200MB

# Logging Configuration
logging.config=classpath:logback-spring.xml
logging.file.path=${LOG_PATH:./logs}
logging.level.root=${LOG_LEVEL:INFO}
logging.level.io.mersel.dss.verify.api=${LOG_LEVEL:INFO}

# Application Info
spring.application.name=mersel-dss-verify-api
info.app.name=Mersel DSS Verify API
info.app.description=Dijital Imza Dogrulama Servisi API
info.app.version=@project.version@

# CORS Configuration
# Production ortaminda spesifik domain'ler kullanin
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:*}
cors.allowed-methods=${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
cors.max-age=${CORS_MAX_AGE:3600}

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,prometheus,metrics
management.health.defaults.enabled=true
management.info.env.enabled=true

# Prometheus Metrics Configuration
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.tags.application=${spring.application.name}

# ============================================
# Verification Configuration (Environment Variables)
# ============================================

# --- Guvenilir Kok Sertifika Resolver Konfigurasyonu ---
# Resolver tipi: "kamusm-online", "kamusm-offline" veya "certificate-folder"
# - kamusm-online: Internet uzerinden KamuSM XML deposunu yukler
# - kamusm-offline: Yerel dosya sisteminden KamuSM XML deposunu yukler
# - certificate-folder: Belirtilen klasordeki tum .crt/.cer dosyalarini yukler
trusted.root.resolver.type=${TRUSTED_ROOT_RESOLVER_TYPE:kamusm-online}

# --- KamuSM XML Depo Online Resolver ---
# KamuSM XML deposu URL'i (online resolver icin)
kamusm.root.url=${KAMUSM_ROOT_URL:http://depo.kamusm.gov.tr/depo/SertifikaDeposu.xml}

# --- Otomatik Yenileme Cron ---
# Tum resolver'lar icin ortak otomatik yenileme cron ifadesi
# Offline ve folder resolver'larda da calisir ancak basarisiz olursa onceki sertifikalar korunur
trusted.root.refresh-cron=${TRUSTED_ROOT_REFRESH_CRON:0 15 3 * * *}

# --- KamuSM XML Depo Offline Resolver ---
# KamuSM XML dosya yolu (offline resolver icin)
# Ornek: file:/path/to/SertifikaDeposu.xml veya classpath:kamusm/SertifikaDeposu.xml
kamusm.root.offline.path=${KAMUSM_ROOT_OFFLINE_PATH:}

# --- Certificate Folder Resolver ---
# Sertifika klasoru yolu (certificate-folder resolver icin)
# Bu klasordeki tum .crt, .cer ve .pem dosyalari guvenilir kok sertifika olarak yuklenir
# Ornek: file:/path/to/certificates veya /absolute/path/to/certificates
trusted.root.cert.folder.path=${TRUSTED_ROOT_CERT_FOLDER_PATH:}

# Sertifika deposu (zorunlu) - JKS formatinda sertifika deposu yolu
verification.certstore.path=${CERTSTORE_PATH:}
verification.certstore.password=${CERTSTORE_PASSWORD:}

# --- Custom Root Certificates ---
# KamuSM disinda ozel root sertifikalar kullanmak icin
verification.custom-root-cert-path=${CUSTOM_ROOT_CERT_PATH:}

# --- Online Certificate Validation ---
# OCSP ve CRL kontrollerinin yapilip yapilmayacagi
verification.online-validation-enabled=${ONLINE_VALIDATION_ENABLED:true}

# --- Strict Validation Mode ---
# Strict mode: SubIndication varsa veya timestamp hatasi varsa imza gecersiz sayilir
# Relaxed mode: DSS'nin kendi validation politikasini kullanir
verification.strict-mode=${VERIFICATION_STRICT_MODE:true}

# --- Timestamp Verification Configuration ---
# Zaman damgasi dogrulama icin guvenilir zaman damgasi otoriteleri
verification.trusted-tsa-certificates=${TRUSTED_TSA_CERTIFICATES:}

# --- Cache Configuration ---
# Sertifika ve CRL cache suresi (saniye)
# Not: CERT_CACHE_TTL ve CRL_CACHE_TTL environment variable'lardan okunur (default: 3600)
